<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Calculadora Programación Lineal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <!-- Theme Toggle: pill switch (sun = light, moon = dark) -->
    <button type="button" class="theme-toggle" id="dark-mode-toggle" role="switch" aria-checked="false" aria-label="Cambiar tema claro/oscuro" title="Cambiar modo oscuro/claro">
        <span class="theme-toggle-track">
            <span class="theme-toggle-slot theme-toggle-slot-sun" aria-hidden="true">
                <svg class="theme-toggle-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>
            </span>
            <span class="theme-toggle-slot theme-toggle-slot-moon" aria-hidden="true">
                <svg class="theme-toggle-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            </span>
            <span class="theme-toggle-thumb" aria-hidden="true">
                <svg class="theme-toggle-thumb-icon theme-toggle-thumb-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>
                <svg class="theme-toggle-thumb-icon theme-toggle-thumb-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            </span>
        </span>
    </button>

    <h1>Calculadora Programación Lineal</h1>

    <!-- Tabs para cambiar entre métodos -->
    <div class="tabs-container">
        <button class="tab-button active" onclick="cambiarMetodo('grafico')">Método Gráfico</button>
        <button class="tab-button" onclick="cambiarMetodo('simplex')">Método Simplex</button>
        <button class="tab-button" onclick="cambiarMetodo('dos-fases')">Método 2 Fases</button>
    </div>

    <!-- Método Gráfico -->
    <div id="metodo-grafico" class="metodo-section">
        <div class="box">
            <h3>1. Función Objetivo (Z)</h3>
            <select id="objetivo">
                <option value="max">Maximizar</option>
                <option value="min">Minimizar</option>
            </select>
            <div id="z-coefs-container-grafico" style="margin-top: 10px;">
                <span>Z = </span>
                <input type="number" class="z-coef-grafico" id="z_x" value="3" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off">
                <span> X </span>
                <select class="z-op-grafico" id="z_op_y" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                    <option value="+">+</option>
                    <option value="-">−</option>
                </select>
                <input type="number" class="z-coef-grafico" id="z_y" value="2" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off">
                <span> Y</span>
            </div>
            <br>
            <div style="margin-top: 10px;">
                <span style="font-size: 0.9em; color: var(--text-quaternary);">Nota: El método gráfico solo visualiza 2 variables (X y Y)</span>
            </div>
        </div>

        <div class="box">
            <!-- Título con botones de modo -->
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                <h3 style="margin: 0;">2. Restricciones</h3>
                <div class="restriction-mode-buttons">
                    <button class="restriction-mode-btn active" onclick="cambiarModoRestricciones('coeficientes')" data-mode="coeficientes">
                        Coeficientes
                    </button>
                    <button class="restriction-mode-btn" onclick="cambiarModoRestricciones('natural')" data-mode="natural">
                        Forma Natural
                    </button>
                </div>
            </div>
            
            <!-- Modo coeficientes (actual) -->
            <div id="modo-coeficientes">
                <div id="lista-restricciones">
                <div class="fila-restriccion">
                    <input type="number" class="res-x" value="2" style="width: 50px;" inputmode="decimal" autocomplete="off"> X 
                    <select class="res-op-var" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                        <option value="+">+</option>
                        <option value="-">−</option>
                    </select>
                    <input type="number" class="res-y" value="1" style="width: 50px;"> Y 
                    <select class="res-op">
                        <option value="<=">&le;</option>
                        <option value=">=">&ge;</option>
                        <option value="=">=</option>
                    </select>
                    <input type="number" class="res-val" value="100" style="width: 60px;">
                </div>
                <div class="fila-restriccion">
                    <input type="number" class="res-x" value="1" style="width: 50px;" inputmode="decimal" autocomplete="off"> X 
                    <select class="res-op-var" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                        <option value="+">+</option>
                        <option value="-">−</option>
                    </select>
                    <input type="number" class="res-y" value="1" style="width: 50px;"> Y 
                    <select class="res-op">
                        <option value="<=">&le;</option>
                        <option value=">=">&ge;</option>
                        <option value="=">=</option>
                    </select>
                    <input type="number" class="res-val" value="80" style="width: 60px;">
                </div>
                </div>
                
                <!-- Aviso sobre restricciones de no negatividad implícitas -->
                <div style="margin-top: 15px; padding: 15px; background: var(--bg-quaternary); border-radius: 8px; border-left: 4px solid var(--accent-primary);">
                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary); line-height: 1.5;">
                        <strong>Nota:</strong> Las restricciones de no negatividad (X ≥ 0, Y ≥ 0) están incluidas de forma implícita en los cálculos. 
                        La calculadora considera automáticamente que todas las variables son no negativas, por lo que no es necesario agregarlas manualmente.
                    </p>
                </div>
                
                <br>
                <button onclick="agregarRestriccionGrafico()" style="margin-top: 10px; background: #3498db;">+ Agregar Restricción</button>
                <button onclick="eliminarRestriccionGrafico()" style="margin-top: 10px; background: #e74c3c;">- Eliminar Restricción</button>
            </div>
            
            <!-- Modo forma natural (nuevo) -->
            <div id="modo-natural" style="display: none;">
                <div style="margin-bottom: 10px;">
                    <label for="restricciones-natural" style="display: block; margin-bottom: 5px; font-weight: bold;">
                        Ingresa las restricciones (una por línea):
                    </label>
                    <textarea 
                        id="restricciones-natural" 
                        rows="6" 
                        style="width: 100%; padding: 10px; font-family: monospace; border: 1px solid var(--border-primary); border-radius: 4px;"
                        placeholder="Ejemplos:&#10;y >= x&#10;y <= 2x&#10;x <= 30&#10;y <= 20&#10;x + y >= 10"
                    ></textarea>
                </div>
                <div class="info-box">
                    <strong>Información:</strong>
                    <ul style="margin: 5px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Usa "x" y "y" para las variables</li>
                        <li>Usa ">=", "<=", o "=" para los operadores</li>
                        <li>Ejemplos: "y >= x", "y <= 2x", "x + y <= 10"</li>
                        <li>Puedes combinar ambos modos: escribe en forma natural y luego cambia a coeficientes</li>
                    </ul>
                </div>
                <button onclick="convertirRestriccionesNaturales()" style="margin-top: 10px; background: #16a085;">Convertir a Coeficientes</button>
            </div>
            
            <br>
            <button onclick="resolverProblema()">CALCULAR SOLUCIÓN</button>
        </div>
    </div>

    <!-- Método Simplex -->
    <div id="metodo-simplex" class="metodo-section" style="display:none;">
        <div class="box">
            <h3>1. Función Objetivo (Z)</h3>
            <select id="objetivo-simplex">
                <option value="max">Maximizar</option>
                <option value="min">Minimizar</option>
            </select>
            <div id="z-coefs-container" style="margin-top: 10px;">
                <span>Z = </span>
                <input type="number" class="z-coef" value="1" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off">
                <span> X₁ </span>
                <select class="z-op" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                    <option value="+">+</option>
                    <option value="-">−</option>
                </select>
                <input type="number" class="z-coef" value="5" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off">
                <span> X₂</span>
            </div>
            <br>
            <button onclick="agregarVariableSimplex()" style="margin-top: 10px; background: #27ae60;">+ Agregar Variable</button>
            <button onclick="eliminarVariableSimplex()" style="margin-top: 10px; background: #e74c3c;">- Eliminar Variable</button>
        </div>

        <div class="box">
            <!-- Título con botones de modo -->
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                <h3 style="margin: 0;">2. Restricciones</h3>
                <div class="restriction-mode-buttons-simplex">
                    <button class="restriction-mode-btn-simplex active" onclick="cambiarModoRestriccionesSimplex('coeficientes')" data-mode="coeficientes">
                        Coeficientes
                    </button>
                    <button class="restriction-mode-btn-simplex" onclick="cambiarModoRestriccionesSimplex('natural')" data-mode="natural">
                        Forma Natural
                    </button>
                </div>
            </div>
            
            <!-- Modo coeficientes (actual) -->
            <div id="modo-coeficientes-simplex">
                <div id="lista-restricciones-simplex">
                    <!-- Placeholders: Max Z = x₁ + 5x₂ s.a. 5x₁+6x₂≤30, 3x₁+2x₂≤15, -x₁+2x₂≤10 -->
                    <div class="fila-restriccion-simplex">
                        <input type="number" class="res-coef" value="5" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off"> X₁ 
                        <select class="res-op-var-simplex" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                            <option value="+">+</option>
                            <option value="-">−</option>
                        </select>
                        <input type="number" class="res-coef" value="6" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off"> X₂ 
                        <select class="res-op-simplex">
                            <option value="<=" selected>&le;</option>
                            <option value=">=">&ge;</option>
                            <option value="=">=</option>
                        </select>
                        <input type="number" class="res-val-simplex" value="30" style="width: 60px;" inputmode="decimal" autocomplete="off">
                    </div>
                    <div class="fila-restriccion-simplex">
                        <input type="number" class="res-coef" value="3" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off"> X₁ 
                        <select class="res-op-var-simplex" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                            <option value="+">+</option>
                            <option value="-">−</option>
                        </select>
                        <input type="number" class="res-coef" value="2" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off"> X₂ 
                        <select class="res-op-simplex">
                            <option value="<=" selected>&le;</option>
                            <option value=">=">&ge;</option>
                            <option value="=">=</option>
                        </select>
                        <input type="number" class="res-val-simplex" value="15" style="width: 60px;" inputmode="decimal" autocomplete="off">
                    </div>
                    <div class="fila-restriccion-simplex">
                        <input type="number" class="res-coef" value="-1" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off"> X₁ 
                        <select class="res-op-var-simplex" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                            <option value="+">+</option>
                            <option value="-">−</option>
                        </select>
                        <input type="number" class="res-coef" value="2" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off"> X₂ 
                        <select class="res-op-simplex">
                            <option value="<=" selected>&le;</option>
                            <option value=">=">&ge;</option>
                            <option value="=">=</option>
                        </select>
                        <input type="number" class="res-val-simplex" value="10" style="width: 60px;" inputmode="decimal" autocomplete="off">
                    </div>
                </div>
                
                <!-- Aviso sobre restricciones de no negatividad implícitas -->
                <div style="margin-top: 15px; padding: 15px; background: var(--bg-quaternary); border-radius: 8px; border-left: 4px solid var(--accent-tertiary);">
                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary); line-height: 1.5;">
                        <strong>Nota:</strong> Las restricciones de no negatividad (x₁ ≥ 0, x₂ ≥ 0, ...) están incluidas de forma implícita en los cálculos. 
                        La calculadora considera automáticamente que todas las variables son no negativas.
                    </p>
                </div>
                
                <br>
                <button onclick="agregarRestriccionSimplex()" style="margin-top: 10px; background: #3498db;">+ Agregar Restricción</button>
                <button onclick="eliminarRestriccionSimplex()" style="margin-top: 10px; background: #e74c3c;">- Eliminar Restricción</button>
            </div>
            
            <!-- Modo forma natural (nuevo) -->
            <div id="modo-natural-simplex" style="display: none;">
                <div style="margin-bottom: 10px;">
                    <label for="restricciones-natural-simplex" style="display: block; margin-bottom: 5px; font-weight: bold;">
                        Ingresa las restricciones (una por línea):
                    </label>
                    <textarea 
                        id="restricciones-natural-simplex" 
                        rows="6" 
                        style="width: 100%; padding: 10px; font-family: monospace; border: 1px solid var(--border-primary); border-radius: 4px;"
                        placeholder="Ejemplo (mismo que placeholders):&#10;5x1 + 6x2 <= 30&#10;3x1 + 2x2 <= 15&#10;-x1 + 2x2 <= 10"
                    ></textarea>
                </div>
                <div class="info-box">
                    <strong>Información:</strong>
                    <ul style="margin: 5px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Usa "x1", "x2", "x3", etc. para las variables</li>
                        <li>Usa ">=", "<=", o "=" para los operadores</li>
                        <li>Ejemplos: "x1 + x2 <= 10", "2x1 + 3x2 >= 20", "x1 - x2 = 5"</li>
                        <li>Puedes combinar ambos modos: escribe en forma natural y luego cambia a coeficientes</li>
                    </ul>
                </div>
                <button onclick="convertirRestriccionesNaturalesSimplex()" style="margin-top: 10px; background: #16a085;">Convertir a Coeficientes</button>
            </div>
            
            <br>
            <button onclick="resolverSimplex()">CALCULAR SOLUCIÓN (SIMPLEX)</button>
        </div>
    </div>

    <!-- Método 2 Fases -->
    <div id="metodo-dos-fases" class="metodo-section" style="display:none;">
        <div class="box">
            <h3>1. Función Objetivo (Z)</h3>
            <select id="objetivo-dos-fases">
                <option value="max">Maximizar</option>
                <option value="min">Minimizar</option>
            </select>
            <div id="z-coefs-container-dos-fases" style="margin-top: 10px;">
                <span>Z = </span>
                <input type="number" class="z-coef-dos-fases" value="4" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off">
                <span> X₁ </span>
                <select class="z-op-dos-fases" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                    <option value="+">+</option>
                    <option value="-">−</option>
                </select>
                <input type="number" class="z-coef-dos-fases" value="3" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off">
                <span> X₂</span>
            </div>
            <br>
            <button onclick="agregarVariableDosFases()" style="margin-top: 10px; background: #27ae60;">+ Agregar Variable</button>
            <button onclick="eliminarVariableDosFases()" style="margin-top: 10px; background: #e74c3c;">- Eliminar Variable</button>
        </div>

        <div class="box">
            <!-- Título con botones de modo -->
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                <h3 style="margin: 0;">2. Restricciones</h3>
                <div class="restriction-mode-buttons-dos-fases">
                    <button class="restriction-mode-btn-dos-fases active" onclick="cambiarModoRestriccionesDosFases('coeficientes')" data-mode="coeficientes">
                        Coeficientes
                    </button>
                    <button class="restriction-mode-btn-dos-fases" onclick="cambiarModoRestriccionesDosFases('natural')" data-mode="natural">
                        Forma Natural
                    </button>
                </div>
            </div>
            
            <!-- Modo coeficientes (actual) -->
            <div id="modo-coeficientes-dos-fases">
                <div id="lista-restricciones-dos-fases">
                    <!-- Placeholders de fábrica: ejercicio propio con >= (Z=4x₁+3x₂ max, x₁+x₂≥5, x₁≤6, x₂≤6) -->
                    <div class="fila-restriccion-dos-fases">
                        <input type="number" class="res-coef-dos-fases" value="1" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off"> X₁ 
                        <select class="res-op-var-dos-fases" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                            <option value="+">+</option>
                            <option value="-">−</option>
                        </select>
                        <input type="number" class="res-coef-dos-fases" value="1" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off"> X₂ 
                        <select class="res-op-dos-fases">
                            <option value="<=">&le;</option>
                            <option value=">=" selected>&ge;</option>
                            <option value="=">=</option>
                        </select>
                        <input type="number" class="res-val-dos-fases" value="5" style="width: 60px;" inputmode="decimal" autocomplete="off">
                    </div>
                    <div class="fila-restriccion-dos-fases">
                        <input type="number" class="res-coef-dos-fases" value="1" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off"> X₁ 
                        <select class="res-op-var-dos-fases" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                            <option value="+">+</option>
                            <option value="-">−</option>
                        </select>
                        <input type="number" class="res-coef-dos-fases" value="0" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off"> X₂ 
                        <select class="res-op-dos-fases">
                            <option value="<=" selected>&le;</option>
                            <option value=">=">&ge;</option>
                            <option value="=">=</option>
                        </select>
                        <input type="number" class="res-val-dos-fases" value="6" style="width: 60px;" inputmode="decimal" autocomplete="off">
                    </div>
                    <div class="fila-restriccion-dos-fases">
                        <input type="number" class="res-coef-dos-fases" value="0" style="width: 50px;" data-var="0" inputmode="decimal" autocomplete="off"> X₁ 
                        <select class="res-op-var-dos-fases" data-var="1" style="width: 50px; margin: 0 5px; padding: 4px; text-align: center; font-size: 1.2em; font-weight: bold;">
                            <option value="+">+</option>
                            <option value="-">−</option>
                        </select>
                        <input type="number" class="res-coef-dos-fases" value="1" style="width: 50px;" data-var="1" inputmode="decimal" autocomplete="off"> X₂ 
                        <select class="res-op-dos-fases">
                            <option value="<=" selected>&le;</option>
                            <option value=">=">&ge;</option>
                            <option value="=">=</option>
                        </select>
                        <input type="number" class="res-val-dos-fases" value="6" style="width: 60px;" inputmode="decimal" autocomplete="off">
                    </div>
                </div>
                
                <!-- Aviso sobre restricciones de no negatividad implícitas -->
                <div style="margin-top: 15px; padding: 15px; background: var(--bg-quaternary); border-radius: 8px; border-left: 4px solid var(--accent-tertiary);">
                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary); line-height: 1.5;">
                        <strong>Nota:</strong> Las restricciones de no negatividad (x₁ ≥ 0, x₂ ≥ 0, ...) están incluidas de forma implícita en los cálculos. 
                        La calculadora considera automáticamente que todas las variables son no negativas.
                    </p>
                </div>
                
                <br>
                <button onclick="agregarRestriccionDosFases()" style="margin-top: 10px; background: #3498db;">+ Agregar Restricción</button>
                <button onclick="eliminarRestriccionDosFases()" style="margin-top: 10px; background: #e74c3c;">- Eliminar Restricción</button>
            </div>
            
            <!-- Modo forma natural (nuevo) -->
            <div id="modo-natural-dos-fases" style="display: none;">
                <div style="margin-bottom: 10px;">
                    <label for="restricciones-natural-dos-fases" style="display: block; margin-bottom: 5px; font-weight: bold;">
                        Ingresa las restricciones (una por línea):
                    </label>
                    <textarea 
                        id="restricciones-natural-dos-fases" 
                        rows="6" 
                        style="width: 100%; padding: 10px; font-family: monospace; border: 1px solid var(--border-primary); border-radius: 4px;"
                        placeholder="Ejemplo (mismo que placeholders):&#10;x1 + x2 >= 5&#10;x1 <= 6&#10;x2 <= 6"
                    ></textarea>
                </div>
                <div class="info-box">
                    <strong>Información:</strong>
                    <ul style="margin: 5px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Usa "x1", "x2", "x3", etc. para las variables</li>
                        <li>Usa ">=", "<=", o "=" para los operadores</li>
                        <li>Ejemplos: "x1 + x2 <= 10", "2x1 + 3x2 >= 20", "x1 - x2 = 5"</li>
                        <li>El método de 2 Fases es ideal cuando hay restricciones >= o =</li>
                    </ul>
                </div>
                <button onclick="convertirRestriccionesNaturalesDosFases()" style="margin-top: 10px; background: #16a085;">Convertir a Coeficientes</button>
            </div>
            
            <br>
            <button onclick="resolverDosFases()">CALCULAR SOLUCIÓN (2 FASES)</button>
        </div>
    </div>

    <!-- Resultados Método Gráfico -->
    <div class="box" id="resultados" style="display:none;">
        
        <div class="calculations-header">
            <h3 style="display: inline-block; margin: 0; border-bottom: 3px solid #7f8c8d;">
                1. Cálculos y Evaluaciones
            </h3>
            <button id="toggle-calculations" class="toggle-btn" onclick="toggleCalculations()">
                <span id="toggle-icon">▼</span> Ver Detalles
            </button>
        </div>
        <div id="calculations-summary" class="calculations-summary"></div>
        <div id="log-container" class="timeline" style="display:none;"></div>

        <h3><span style="border-bottom: 3px solid #3498db;">2. Gráfica de la Región Factible</span></h3>
        <div id="grafico" style="width:100%; height:500px;"></div>

        <h3><span style="border-bottom: 3px solid #27ae60;">3. Tabla de Evaluación de Vértices</span></h3>
        <div class="info-box" style="font-size: 0.9em;">
            <strong>Explicación:</strong> Esta tabla muestra cómo se calcula el valor de la función objetivo Z para cada vértice de la región factible. 
            El cálculo se realiza sustituyendo las coordenadas (X, Y) del vértice en la función objetivo.
        </div>
        <table class="tabla-resultados">
            <thead>
                <tr>
                    <th>Vértice (X, Y)</th>
                    <th>Valor Z</th>
                    <th>Cálculo de Z</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody id="cuerpo-tabla"></tbody>
        </table>

        <div id="analisis-box" class="analysis-box">
            <h2 id="titulo-tipo-solucion">Solución Final</h2>
            <p id="texto-explicacion"></p>
            <div id="caja-resultado-final" class="resultado-final-box" style="margin-top: 15px; font-size: 1.2em;"></div>
        </div>

    </div>

    <!-- Resultados Método Simplex -->
    <div class="box" id="resultados-simplex" style="display:none;">
        
        <div class="calculations-header">
            <h3 style="display: inline-block; margin: 0; border-bottom: 3px solid #7f8c8d;">
                Pasos del Algoritmo Simplex
            </h3>
            <button id="toggle-calculations-simplex" class="toggle-btn" onclick="toggleCalculationsSimplex()">
                <span id="toggle-icon-simplex">▼</span> Ver Detalles
            </button>
        </div>
        <div id="calculations-summary-simplex" class="calculations-summary"></div>
        <div id="log-container-simplex" class="timeline" style="display:none;"></div>

        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
            <h3 style="margin: 0;"><span style="border-bottom: 3px solid #9b59b6;">Tablas del Simplex</span></h3>
            <div class="display-mode-buttons" role="group" aria-label="Formato de visualización">
                <button type="button" class="display-mode-btn" data-mode="decimal" onclick="cambiarModoDisplayTablas('decimal', this)">Decimales</button>
                <button type="button" class="display-mode-btn active" data-mode="fraction" onclick="cambiarModoDisplayTablas('fraction', this)">Fracciones</button>
            </div>
        </div>
        <div id="tablas-simplex-container"></div>

        <div id="analisis-box-simplex" class="analysis-box">
            <h2 id="titulo-tipo-solucion-simplex">Solución Final</h2>
            <p id="texto-explicacion-simplex"></p>
            <div id="caja-resultado-final-simplex" class="resultado-final-box" style="margin-top: 15px; font-size: 1.2em;"></div>
        </div>

    </div>

    <!-- Resultados Método 2 Fases -->
    <div class="box" id="resultados-dos-fases" style="display:none;">
        
        <div class="calculations-header">
            <h3 style="display: inline-block; margin: 0; border-bottom: 3px solid #7f8c8d;">
                Pasos del Método de las Dos Fases
            </h3>
            <button id="toggle-calculations-dos-fases" class="toggle-btn" onclick="toggleCalculationsDosFases()">
                <span id="toggle-icon-dos-fases">▼</span> Ver Detalles
            </button>
        </div>
        <div id="calculations-summary-dos-fases" class="calculations-summary"></div>
        <div id="log-container-dos-fases" class="timeline" style="display:none;"></div>

        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
            <h3 style="margin: 0;"><span style="border-bottom: 3px solid #9b59b6;">Tablas del Método de 2 Fases</span></h3>
            <div class="display-mode-buttons" role="group" aria-label="Formato de visualización">
                <button type="button" class="display-mode-btn" data-mode="decimal" onclick="cambiarModoDisplayTablas('decimal', this)">Decimales</button>
                <button type="button" class="display-mode-btn active" data-mode="fraction" onclick="cambiarModoDisplayTablas('fraction', this)">Fracciones</button>
            </div>
        </div>
        <div id="tablas-dos-fases-container"></div>

        <div id="analisis-box-dos-fases" class="analysis-box">
            <h2 id="titulo-tipo-solucion-dos-fases">Solución Final</h2>
            <p id="texto-explicacion-dos-fases"></p>
            <div id="caja-resultado-final-dos-fases" class="resultado-final-box" style="margin-top: 15px; font-size: 1.2em;"></div>
        </div>

    </div>

    <!-- Footer -->
    <footer>
        <p>Proyecto Universitario realizado por:</p>
        <p style="text-align: center; margin: 0.5em 0;">
            <a href="https://github.com/williamfloress" target="_blank" rel="noopener noreferrer">William Flores</a>,
            Gabriel Lopez
        </p>
        <p>Universidad de Oriente - 2026.</p>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Verificación adicional de que todo se cargó
        if (typeof resolverProblema === 'undefined') {
            console.error('Error crítico: El script main.js no se cargó correctamente');
            document.body.innerHTML = '<div style="padding: 20px; text-align: center;"><h1>Error al cargar la aplicación</h1><p>Por favor, recarga la página o verifica tu conexión a internet.</p></div>';
        }
    </script>
</body>
</html>