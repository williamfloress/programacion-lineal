<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calculadora Programación Lineal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <h1>Calculadora Método Gráfico</h1>

    <div class="box">
        <h3>1. Función Objetivo (Z)</h3>
        <select id="objetivo">
            <option value="max">Maximizar</option>
            <option value="min">Minimizar</option>
        </select>
        Z = <input type="number" id="z_x" value="3" style="width: 50px;"> X + 
            <input type="number" id="z_y" value="2" style="width: 50px;"> Y
    </div>

    <div class="box">
        <h3>2. Restricciones</h3>
        <div id="lista-restricciones">
            <div class="fila-restriccion">
                <input type="number" class="res-x" value="2" style="width: 50px;"> X + 
                <input type="number" class="res-y" value="1" style="width: 50px;"> Y 
                <select class="res-op"><option value="<=">&le;</option><option value=">=">&ge;</option></select>
                <input type="number" class="res-val" value="100" style="width: 60px;">
            </div>
            <div class="fila-restriccion">
                <input type="number" class="res-x" value="1" style="width: 50px;"> X + 
                <input type="number" class="res-y" value="1" style="width: 50px;"> Y 
                <select class="res-op"><option value="<=">&le;</option><option value=">=">&ge;</option></select>
                <input type="number" class="res-val" value="80" style="width: 60px;">
            </div>
        </div>
        <br>
        <button onclick="resolverProblema()">CALCULAR SOLUCIÓN</button>
    </div>

    <div class="box" id="resultados" style="display:none;">
        
        <div class="calculations-header">
            <h3 style="display: inline-block; margin: 0; border-bottom: 3px solid #7f8c8d;">
                1. Cálculos y Evaluaciones
            </h3>
            <button id="toggle-calculations" class="toggle-btn" onclick="toggleCalculations()">
                <span id="toggle-icon">▼</span> Ver Detalles
            </button>
        </div>
        <div id="calculations-summary" class="calculations-summary"></div>
        <div id="log-container" class="timeline" style="display:none;"></div>

        <h3><span style="border-bottom: 3px solid #3498db;">2. Gráfica de la Región Factible</span></h3>
        <div id="grafico" style="width:100%; height:500px;"></div>

        <h3><span style="border-bottom: 3px solid #27ae60;">3. Tabla de Evaluación de Vértices</span></h3>
        <table class="tabla-resultados">
            <thead>
                <tr>
                    <th>Vértice (X, Y)</th>
                    <th>Valor Z</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody id="cuerpo-tabla"></tbody>
        </table>

        <div id="analisis-box" style="margin-top: 30px; padding: 20px; border-left: 6px solid #2c3e50; background: #eef2f3; border-radius: 5px;">
            <h2 id="titulo-tipo-solucion" style="margin-top:0; color: #2c3e50;">Solución Final</h2>
            <p id="texto-explicacion" style="font-size: 1.1em; line-height: 1.5; color: #444;"></p>
            <div id="caja-resultado-final" class="resultado-final-box" style="margin-top: 15px; font-size: 1.2em;"></div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>